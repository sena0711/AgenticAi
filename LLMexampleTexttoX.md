# 🤖 LLM 기반 Text-to-X 작업 전략 정리

LLM을 활용한 생성 기반 시스템에서, 단순히 프롬프트에 응답하는 것을 넘어 **정확도, 유연성, 보원력**을 높이기 위한 전략적 워크플로우드들이 중요해진다. 
이 문서에서는 대표적인 Text-to-X 생성 후복(Text2SQL, Text2Chart, Text2Code)에 대해 최신 프레임워크와 기반을 적용한 구성을 정리합니다.

---

## 1. Text2SQL
> **자연어 질문 → SQL 쿼리 생성**

### 활용 전략
| 전략 | 설명 |
|--------|------|
| **Multi-Agent** | 질문 분석, 쿼리 생성, 검증 등 역할 분단 |
| **Reflection** | 생성된 SQL의 정확성 평가 및 수정 반복 |
| **Tool Use** | DB 스키마 조회, SQL 실행 도구 등 연계 |
| **LangGraph** | 상태 기반 에이전트 워크플로우 구성 |

### 예시 후복
```
["개발자 수업자 수 검사"]
   ↓
[스키마 이해 Agent → students 테이블 추론]
   ↓
[쿼리 생성 Agent → SELECT COUNT(*) FROM students WHERE major = 'CS']
   ↓
[실행 → 오류 발생 → Reflection Agent: 테이블 없음 → 수정 시도]
   ↓
[최종 쿼리 완성 및 응답 반환]
```

### 다이어그램 예시
```
┌────────────┐     ┌─────────────┐     ┌──────────────┐
│ 사용자 질문 │ → │ Schema Agent │ → │ SQL Generator │
└────────────┘     └─────────────┘     └──────┬───────┘
                                              ↓
                                        ┌────────────┐
                                        │ Reflection │
                                        └────┬───────┘
                                             ↓
                                        ┌────────────┐
                                        │   결과 출력  │
                                        └────────────┘
```

---

## 2. Text2Chart (Text to Image/Chart)
> **텍스트 설명 → 차트 또는 시각화 이미지 생성**

### 활용 전략
| 전략 | 설명 |
|--------|------|
| **Step Planning** | 어느 차트를 만들지 단계 분해 및 계획 |
| **Tool Use** | matplotlib, image generator 등 외부 도구 연계 |
| **Reflection** | 시각화 결과 평가 및 프롬프트 감정 |
| **Retouch Prompt** | 생성된 이미지가 불정확할 경우 자동 프롬프트 리터치 |

### 예시 흐름
```
["만원 보기 차트 생성"]
   ↓
[Step Planner: Pie chart + 데이터 요약 필요 판단]
   ↓
[Chart Tool 호출 → 이미지 생성]
   ↓
[Reflection → 색상 구분 안됨 → Retouch → 재생성]
```

### 다이어그램 예시
```
┌────────────┐     ┌──────────────┐     ┌────────────┐
│ 사용자 설명 │ → │ Step Planner │ → │ Chart Maker │
└────────────┘     └──────────────┘     └────┬───────┘
                                             ↓
                                       ┌────────────┐
                                       │ Reflection │
                                       └────┬───────┘
                                            ↓
                                       ┌────────────┐
                                       │ 이미지 출력 │
                                       └────────────┘
```

---

## 3. Text2Code
> **자연어 설명 → 실행 가능한 코드 생성**

### 활용 전략 (예상 구성)
| 전략 | 설명 |
|--------|------|
| **Planning** | 기능별로 설계 및 모듈화 (함수/클래스 단위 등) |
| **Tool Use** | 코드 실행기, 디버거, 테스트 러너 연계 |
| **Reflection** | 실행 결과에 따라 코드 수정 반복 |
| **Multi-Agent** | 설계 → 구현 → 테스팅 → 디버그 역할 분단 |
| **LangGraph** | 복합 후복을 안전히 통제할 상태 기반 구성 |

### 예시 흐름
```
["웹 크롤러 만들어줘"]
   ↓
[기능 분석 → URL 요청 / HTML 파싱 / 결과 저장으로 분리]
   ↓
[코드 생성 Agent: Python + requests + bs4 사용]
   ↓
[코드 실행 → 실패 → 디버깅 Agent: headers 추가, 예외 처리 보완]
   ↓
[테스트 통과 후 최종 코드 반환]
```

### 다이어그램 예시
```
┌────────────┐     ┌──────────────┐     ┌────────────┐
│ 사용자 설명 │ → │ Task Planner │ → │ Code Writer │
└────────────┘     └──────────────┘     └────┬───────┘
                                             ↓
                                       ┌────────────┐
                                       │  실행 & 반성  │
                                       └────┬───────┘
                                            ↓
                                       ┌────────────┐
                                       │ 최종 코드 출력 │
                                       └────────────┘
```

---

## 🔚 요약

| 작업 유형 | 해제 구조 | 프레임워크 / 기능 |
|------------|------------|----------------------|
| Text2SQL | Multi-Agent, Reflection, Tool Use | LangGraph, SQL Executor |
| Text2Chart | Planning, Tool Use, Prompt Retouch | Image Generator, Visual Toolkits |
| Text2Code | Planning, Multi-Agent, Tool Use, Reflection | LangGraph, Code Interpreter |

→ 다양한 Text-to-X 작업에 대해 **정확성 보장 및 생성 훈적 향상**을 위한 **복합 에이전트 설계**가 중요한 후복으로 나타나고 있습니다.

